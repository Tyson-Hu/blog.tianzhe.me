<!DOCTYPE html><html lang="[&quot;zh-CN&quot;,&quot;en&quot;,&quot;default&quot;]" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Tyson's blog - 生而为人，我很抱歉</title><meta name="author" content="Tyson Hu"><meta name="copyright" content="Tyson Hu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一个因突发奇想而创建的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="Tyson&#39;s blog">
<meta property="og:url" content="https://tianzhe.me/index.html">
<meta property="og:site_name" content="Tyson&#39;s blog">
<meta property="og:description" content="一个因突发奇想而创建的博客">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://avatars1.githubusercontent.com/u/62329498?s=400&u=20198ec972904a758bc5f6ba4888c5ac6b6270fb&v=4">
<meta property="article:author" content="Tyson Hu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://avatars1.githubusercontent.com/u/62329498?s=400&u=20198ec972904a758bc5f6ba4888c5ac6b6270fb&v=4"><link rel="shortcut icon" href="/img/favicon.jpeg"><link rel="canonical" href="https://tianzhe.me/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="E3ldS1S2QwwG6Wt7hTzCzP8cEsZe4qy7GuQn5C9D5Fk"/><meta name="baidu-site-verification" content="RZuOf3nNVc"/><meta name="bing_site_verification" content="E3ldS1S2QwwG6Wt7hTzCzP8cEsZe4qy7GuQn5C9D5Fk"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Tyson\'s blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: undefined,
  isToc: false,
  postUpdate: '2022-08-08 21:15:23'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#212121')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="https://avatars1.githubusercontent.com/u/62329498?s=400&amp;u=20198ec972904a758bc5f6ba4888c5ac6b6270fb&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">42</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页/Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴/Arch</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签/Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类/Ctgy</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa-fw fas fa-comment-dots"></i><span> 留言板/MsgBoard</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 好友/Frds</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于👴 / About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://raw.githubusercontent.com/Tyson-Hu/Just_Wallpaper/master/2.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Tyson's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页/Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴/Arch</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签/Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类/Ctgy</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa-fw fas fa-comment-dots"></i><span> 留言板/MsgBoard</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 好友/Frds</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于👴 / About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Tyson's blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/Tyson-Hu" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2535280450&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="https://www.instagram.com/tyson.hu/" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a><a class="social-icon" href="https://twitter.com/tysonhu_twr" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="mailto:tianzheh@buffalo.edu" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/cn/algo-intro/" title="Leetcode 刷题前言"><img class="post_bg" src= "/img/loading.gif" data-lazy-src="https://repository-images.githubusercontent.com/408927712/1c5ce46e-266f-43f0-b543-75bf341239b5" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Leetcode 刷题前言"></a></div><div class="recent-post-info"><a class="article-title" href="/cn/algo-intro/" title="Leetcode 刷题前言">Leetcode 刷题前言</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-08-08T05:12:58.000Z" title="发表于 2022-08-08 01:12:58">2022-08-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Algorithm/">Algorithm</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Algorithm/C/">C++</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Algorithm/">Algorithm</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/C/">C++</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/cn/algo-intro/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">English？Click here
写在最前作为 Leetcode 刷题系列的前言，我想给大伙儿和我自己说明一下这个系列的目的和参考。大家如果点进这篇文章就说明大家其实都想通过 Leetcode 来提升自己的码字实力，我与大家一样也渴望通过刷题通过后面的面试，而记录在博客不单单是为了记录这过程中我的所做所想，同样还为了对未来的自己提供一个可以快速复习的资源。当然如果这些文章能给你们也带来帮助那更好，这也证明我的文笔没有想的那么烂哈哈哈哈😂 
题组来自哪？很多人跟我一样在第一次接触 Leetcode 时对于该去刷哪道题完全没有头绪，在这里就要非常感谢这些将所有的题目进行过滤并进行排序组合的大佬们给后辈们铺好了路！资源有很多，但目前来说我将以 “代码随想录” 提供的刷题攻略进行练习，在这里再次感谢他们无私的奉献！！！
代码规范在刷题时，代码的规范性同样需要注意，这也是一个巩固自己代码规范的机会。很多人不屑于了解代码规范，将重心放在功能的实现上，这在未来大公司的小组里是非常致命的！不规范的代码会对后期的维护十分困难，也是公司招人的一个标准。
变量命名主流有三种：

小驼峰、大驼峰命名法
 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/en/algo-intro/" title="Algorithm Introduction"><img class="post_bg" src= "/img/loading.gif" data-lazy-src="https://repository-images.githubusercontent.com/408927712/1c5ce46e-266f-43f0-b543-75bf341239b5" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Algorithm Introduction"></a></div><div class="recent-post-info"><a class="article-title" href="/en/algo-intro/" title="Algorithm Introduction">Algorithm Introduction</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-08-08T01:39:11.000Z" title="发表于 2022-08-07 21:39:11">2022-08-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Algorithm/">Algorithm</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Algorithm/C/">C++</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Algorithm/">Algorithm</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/C/">C++</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/en/algo-intro/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">看不懂英文？点这里      
AbstractThis series of posts are used to record how I learned and understand by algorithm practice on leetcode. Hopefully, these post would be a great review of what I learned, and might give you some advice on how to solve these questions.
Where they from? (Link at References)It is better to now what&#x2F;which question should you take before we start doing them, or you will not know where to start, where to go next level. Thus, I found a GitHub repository about the leetcode que ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/cn/LO3-6-Immutability/" title="CSE116的学习笔记-Lec3-6:Immutability"><img class="post_bg" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec3-6:Immutability"></a></div><div class="recent-post-info"><a class="article-title" href="/cn/LO3-6-Immutability/" title="CSE116的学习笔记-Lec3-6:Immutability">CSE116的学习笔记-Lec3-6:Immutability</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T18:22:31.000Z" title="发表于 2020-12-27 13:22:31">2020-12-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/">CSE116</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/Scala/">Scala</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Scala/">Scala</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/cn/LO3-6-Immutability/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Just the Lecture Question!!!
Lecture QuestionRestriction:No state is allowed in this question. Specifically, the keyword “var” is banned
Question:In a package named “functions” write a class named VoteCounter with the following features:

Has a constructor that takes a List of Strings representing all votes that have been cast
A method named “castVote” that takes a String as a parameter representing a vote for a candidate and returns a new VoteCounter with this vote added to the List of votes
A  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/cn/LO5-6-WebSocket-App/" title="CSE116的学习笔记-Lec5-6:WebSocket_App"><img class="post_bg" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec5-6:WebSocket_App"></a></div><div class="recent-post-info"><a class="article-title" href="/cn/LO5-6-WebSocket-App/" title="CSE116的学习笔记-Lec5-6:WebSocket_App">CSE116的学习笔记-Lec5-6:WebSocket_App</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T17:50:56.000Z" title="发表于 2020-12-27 12:50:56">2020-12-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/">CSE116</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/Scala/">Scala</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Scala/">Scala</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/cn/LO5-6-WebSocket-App/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Chatting with Web SocketsThis is the last Lecture you need to take(without the expansion)    
Clicker App
When the app starts
An actor system is created
A ClickerServer actor is added to the system
UpdateGames message is sent to the server at regular intervals






When a client connects and chooses a username
This username is sent to the server in a WebSocket message of type startGame






In response to receiving the gameStart message, the server:
Sends the client the game configuration in a ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/cn/LO5-5-WebSocket-Clients/" title="CSE116的学习笔记-Lec5-5:WebSocket_Clients"><img class="post_bg" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec5-5:WebSocket_Clients"></a></div><div class="recent-post-info"><a class="article-title" href="/cn/LO5-5-WebSocket-Clients/" title="CSE116的学习笔记-Lec5-5:WebSocket_Clients">CSE116的学习笔记-Lec5-5:WebSocket_Clients</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T17:50:45.000Z" title="发表于 2020-12-27 12:50:45">2020-12-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/">CSE116</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/Scala/">Scala</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Scala/">Scala</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/cn/LO5-5-WebSocket-Clients/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">WebSocket ClientsTeach you how to write a clients:)    
WebSocket Client - Scala
Another new library!
We’ll use the Scala &#x2F; Java version of the socket.io client Library
Follows the same structure as the web client


Add to pom.xml and use maven to download
Included in examples repo






Import relavent code from the socket.io library
Use IO.socket to create a socket
Returns a reference to the created socket


Call connect() to connect to the server

1234567891011121314151617181920import io ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/cn/LO5-4-WebSocket-Server/" title="CSE116的学习笔记-Lec5-4:WebSocket_Server"><img class="post_bg" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec5-4:WebSocket_Server"></a></div><div class="recent-post-info"><a class="article-title" href="/cn/LO5-4-WebSocket-Server/" title="CSE116的学习笔记-Lec5-4:WebSocket_Server">CSE116的学习笔记-Lec5-4:WebSocket_Server</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T17:50:34.000Z" title="发表于 2020-12-27 12:50:34">2020-12-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/">CSE116</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/Scala/">Scala</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Scala/">Scala</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/cn/LO5-4-WebSocket-Server/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">WebSocket ServerTeach you how to write a simple server:)
The Problem
In CSE115 you used HTTP request &#x2F; responses to build web apps
If you wanted more data from the server after the page loads, you used AJAX
Server hosts JSON data at certain end points
Client makes an AJAX call to retrieve the most current data


But the server has to wait for a request before sending a response




What if the server wants to send time-sensitive data without waiting for a request?
In CSE115
Built a chat app ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/cn/LO5-3-Actors/" title="CSE116的学习笔记-Lec5-3:Actors"><img class="post_bg" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec5-3:Actors"></a></div><div class="recent-post-info"><a class="article-title" href="/cn/LO5-3-Actors/" title="CSE116的学习笔记-Lec5-3:Actors">CSE116的学习笔记-Lec5-3:Actors</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T17:50:23.000Z" title="发表于 2020-12-27 12:50:23">2020-12-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/">CSE116</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/Scala/">Scala</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Scala/">Scala</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/cn/LO5-3-Actors/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Actorsactors again!
Stock Trader Example
Simulate stock changing prices and a trader purchasing stocks




Stock
Receives a Tick message and changes its price
Price changes are random for this simulation
Tick messages are sent to all stocks at regular intervals


Receives a GetPrice message and responds with its current price






Trader
Knows each stock’s ticker symbol and actor reference
Receives a CheckStocks message and checks the price of all known stocks
Receives Price messages from stock ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/cn/LO5-2-Testing-Actors/" title="CSE116的学习笔记-Lec5-2:Testing_Actors"><img class="post_bg" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec5-2:Testing_Actors"></a></div><div class="recent-post-info"><a class="article-title" href="/cn/LO5-2-Testing-Actors/" title="CSE116的学习笔记-Lec5-2:Testing_Actors">CSE116的学习笔记-Lec5-2:Testing_Actors</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T17:50:13.000Z" title="发表于 2020-12-27 12:50:13">2020-12-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/">CSE116</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/Scala/">Scala</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Scala/">Scala</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/cn/LO5-2-Testing-Actors/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Testing Actorstesting the actors:)
Traits and Mixins
We’ve seen inheritance by extending abstract class
What if we want to extend multiple classes?
Example: You want an object class that extends PhysicalObject to have physics applied and extend Actor to run concurrently
This is not allowed


Can avoid this need by using composition
Make a class that extends actor and stores a PhysicalObject in a state variable






Traits
Similar to abstract classes
Cannot have a constructor


No limit to the n ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/cn/LO5-1-Actors/" title="CSE116的学习笔记-Lec5-1:Actors"><img class="post_bg" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec5-1:Actors"></a></div><div class="recent-post-info"><a class="article-title" href="/cn/LO5-1-Actors/" title="CSE116的学习笔记-Lec5-1:Actors">CSE116的学习笔记-Lec5-1:Actors</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T17:49:57.000Z" title="发表于 2020-12-27 12:49:57">2020-12-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/">CSE116</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/Scala/">Scala</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Scala/">Scala</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/cn/LO5-1-Actors/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Concurrency and Actorsnew chapter :)
Concurrency
Most programs we’ve written execute code sequentially
Each statement of code is executed in the order they are written
Can have control flow to decide which statements are executed and in which order


What if we want multiple pieces of code to execute at the same time?




We’ve written 2 types of concurrent software already
In CSE115, you wrote a web server
What if 2 users are visiting your site at the same time?
Server waits for requests and ha ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/cn/LO4-6-Pathfinding/" title="CSE116的学习笔记-Lec4_6_Pathfinding"><img class="post_bg" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec4_6_Pathfinding"></a></div><div class="recent-post-info"><a class="article-title" href="/cn/LO4-6-Pathfinding/" title="CSE116的学习笔记-Lec4_6_Pathfinding">CSE116的学习笔记-Lec4_6_Pathfinding</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T17:49:46.000Z" title="发表于 2020-12-27 12:49:46">2020-12-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/">CSE116</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/Scala/">Scala</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Scala/">Scala</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/cn/LO4-6-Pathfinding/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Pathfinding with BFSlittle hard :&#x2F;, but just a little:)    
Paths
Path: A sequence of nodes with each adjacent pair of nodes connected by an edge
The length of a path is the number of edges it contains (number of nodes - 1)
[LINCOLN, MIT, UTAH, SDC, RAND, UCSB, SRI] &lt;– Path of length 6

Distance
Distance between two nodes: The lenght of the shortest path between the nodes
Distance between LINCOLN and SRI &#x3D;&#x3D; 3 [See the video]
Distance between RAND and BBN &#x3D;&#x3D; 1 [See the ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/#content-inner">5</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="https://avatars1.githubusercontent.com/u/62329498?s=400&amp;u=20198ec972904a758bc5f6ba4888c5ac6b6270fb&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Tyson Hu</div><div class="author-info__description">一个因突发奇想而创建的博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">42</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Tyson-Hu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Tyson-Hu" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2535280450&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="https://www.instagram.com/tyson.hu/" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a><a class="social-icon" href="https://twitter.com/tysonhu_twr" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="mailto:tianzheh@buffalo.edu" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">评论首选Twikoo，如果无法使用或者延迟过高可尝试Valine。邮箱处填写QQ邮箱即可获取QQ头像。</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/cn/algo-intro/" title="Leetcode 刷题前言"><img src= "/img/loading.gif" data-lazy-src="https://repository-images.githubusercontent.com/408927712/1c5ce46e-266f-43f0-b543-75bf341239b5" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Leetcode 刷题前言"/></a><div class="content"><a class="title" href="/cn/algo-intro/" title="Leetcode 刷题前言">Leetcode 刷题前言</a><time datetime="2022-08-08T05:12:58.000Z" title="发表于 2022-08-08 01:12:58">2022-08-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/en/algo-intro/" title="Algorithm Introduction"><img src= "/img/loading.gif" data-lazy-src="https://repository-images.githubusercontent.com/408927712/1c5ce46e-266f-43f0-b543-75bf341239b5" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Algorithm Introduction"/></a><div class="content"><a class="title" href="/en/algo-intro/" title="Algorithm Introduction">Algorithm Introduction</a><time datetime="2022-08-08T01:39:11.000Z" title="发表于 2022-08-07 21:39:11">2022-08-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cn/LO3-6-Immutability/" title="CSE116的学习笔记-Lec3-6:Immutability"><img src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec3-6:Immutability"/></a><div class="content"><a class="title" href="/cn/LO3-6-Immutability/" title="CSE116的学习笔记-Lec3-6:Immutability">CSE116的学习笔记-Lec3-6:Immutability</a><time datetime="2020-12-27T18:22:31.000Z" title="发表于 2020-12-27 13:22:31">2020-12-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cn/LO5-6-WebSocket-App/" title="CSE116的学习笔记-Lec5-6:WebSocket_App"><img src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec5-6:WebSocket_App"/></a><div class="content"><a class="title" href="/cn/LO5-6-WebSocket-App/" title="CSE116的学习笔记-Lec5-6:WebSocket_App">CSE116的学习笔记-Lec5-6:WebSocket_App</a><time datetime="2020-12-27T17:50:56.000Z" title="发表于 2020-12-27 12:50:56">2020-12-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cn/LO5-5-WebSocket-Clients/" title="CSE116的学习笔记-Lec5-5:WebSocket_Clients"><img src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116的学习笔记-Lec5-5:WebSocket_Clients"/></a><div class="content"><a class="title" href="/cn/LO5-5-WebSocket-Clients/" title="CSE116的学习笔记-Lec5-5:WebSocket_Clients">CSE116的学习笔记-Lec5-5:WebSocket_Clients</a><time datetime="2020-12-27T17:50:45.000Z" title="发表于 2020-12-27 12:50:45">2020-12-27</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Algorithm/"><span class="card-category-list-name">Algorithm</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Algorithm/C/"><span class="card-category-list-name">C++</span><span class="card-category-list-count">2</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/"><span class="card-category-list-name">Hexo</span><span class="card-category-list-count">6</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/Hello-World/"><span class="card-category-list-name">Hello World</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/%E4%B8%BB%E9%A2%98/"><span class="card-category-list-name">主题</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/%E5%9B%BE%E7%89%87/"><span class="card-category-list-name">图片</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/%E5%9F%9F%E5%90%8D/"><span class="card-category-list-name">域名</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/%E6%8A%A5%E9%94%99/"><span class="card-category-list-name">报错</span><span class="card-category-list-count">1</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Algorithm/" style="font-size: 1.25em; color: rgb(121, 167, 177)">Algorithm</a><a href="/tags/C/" style="font-size: 1.25em; color: rgb(186, 35, 148)">C++</a><a href="/tags/Hexo/" style="font-size: 1.35em; color: rgb(4, 64, 178)">Hexo</a><a href="/tags/CNAME/" style="font-size: 1.15em; color: rgb(108, 29, 159)">CNAME</a><a href="/tags/EE202/" style="font-size: 1.15em; color: rgb(34, 186, 7)">EE202</a><a href="/tags/UB/" style="font-size: 1.15em; color: rgb(161, 162, 33)">UB</a><a href="/tags/Scala/" style="font-size: 1.45em; color: rgb(18, 120, 107)">Scala</a><a href="/tags/macOS/" style="font-size: 1.15em; color: rgb(189, 164, 140)">macOS</a><a href="/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/" style="font-size: 1.15em; color: rgb(190, 48, 55)">黑苹果</a><a href="/tags/OpenCore/" style="font-size: 1.15em; color: rgb(89, 23, 165)">OpenCore</a><a href="/tags/%E6%8A%A5%E9%94%99/" style="font-size: 1.15em; color: rgb(174, 186, 160)">报错</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">十二月 2020</span><span class="card-archive-list-count">20</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/09/"><span class="card-archive-list-date">九月 2020</span><span class="card-archive-list-count">19</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/07/"><span class="card-archive-list-date">七月 2020</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">42</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2020-09-01T04:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">48.4k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-08-09T01:15:22.480Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Tyson Hu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">生而为人，我很抱歉</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(() => { 
  const getCommentUrl = () => {
    const eleGroup = document.querySelectorAll('#recent-posts .article-title')
    let urlArray = []
    eleGroup.forEach(i=>{
      urlArray.push(i.getAttribute('href'))
    })
    return urlArray
  }

  const getCount = () => {
    const runTwikoo = () => {
      twikoo.getCommentsCount({
        envId: 'https://blog-twikoo-ten.vercel.app',
        region: '',
        urls: getCommentUrl(),
        includeReply: false
      }).then(function (res) {
        document.querySelectorAll('#recent-posts .twikoo-count').forEach((item,index) => {
          item.innerText = res[index].count
        })
      }).catch(function (err) {
        console.log(err)
      })
    }

      if (typeof twikoo === 'object') {
        runTwikoo()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
      }
  }

  window.pjax ? getCount() : window.addEventListener('load', getCount)

})()</script><script>function subtitleType () {
  getScript('https://yijuzhan.com/api/word.php?m=js').then(() => {
    const con = str[0]
    if (true) {
      const from = '出自 ' + str[1]
      const sub = []
      sub.unshift(con, from)
      window.typed = new Typed('#subtitle', {
        strings: sub,
        startDelay: 300,
        typeSpeed: 150,
        loop: true,
        backSpeed: 50,
      })
    } else {
      document.getElementById('subtitle').innerHTML = con
    }
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://blog-twikoo-ten.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="7498303030" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-autoplay="true"> </div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script>(function(d, w, c) {
    w.ChatraID = 'M5fnBvYBprT64WyMZ';
    var s = d.createElement('script');
    w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments);
    };
    s.async = true;
    s.src = 'https://call.chatra.io/chatra.js';
    if (d.head) d.head.appendChild(s);
})(document, window, 'Chatra');

if (true) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      Chatra('openChat')
    });
  }
  chatBtnFn()
} else {
  if (true) {
    function chatBtnHide () {
      Chatra('hide')
    }
    function chatBtnShow () {
      Chatra('show')
    }
  }
}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>